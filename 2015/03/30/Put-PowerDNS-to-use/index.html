
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Put PowerDNS to Practice | ruiayLin&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="ruichao.lin">
    

    
    <meta name="description" content="Put PowerDNS to Practice PowerDNS is proud to be an open source product for DNS parsing . It is one such marvelous open alternative domain name system (DNS). PowerDNS is notably in use at some of the">
<meta property="og:type" content="article">
<meta property="og:title" content="Put PowerDNS to Practice">
<meta property="og:url" content="http://ruiaylin.github.io/2015/03/30/Put-PowerDNS-to-use/index.html">
<meta property="og:site_name" content="ruiayLin&#39;s Blog">
<meta property="og:description" content="Put PowerDNS to Practice PowerDNS is proud to be an open source product for DNS parsing . It is one such marvelous open alternative domain name system (DNS). PowerDNS is notably in use at some of the">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2015-03-30T05:50:53.000Z">
<meta property="article:modified_time" content="2024-03-02T09:18:29.285Z">
<meta property="article:author" content="ruichao.lin">
<meta property="article:tag" content="PowerDNS">
<meta property="article:tag" content="DNS">
<meta name="twitter:card" content="summary">

    
    <link rel="alternative" href="/atom.xml" title="ruiayLin&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.1.1"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.jpeg" alt="ruiayLin&#39;s Blog" title="ruiayLin&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="ruiayLin&#39;s Blog">ruiayLin&#39;s Blog</a></h1>
				<h2 class="blog-motto">蹈之而弗悔 , 慎思而笃行 ...</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:ruiaylin.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/03/30/Put-PowerDNS-to-use/" title="Put PowerDNS to Practice" itemprop="url">Put PowerDNS to Practice</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ruichao.lin" target="_blank" itemprop="author">ruichao.lin</a>
		
  <p class="article-time">
    <time datetime="2015-03-30T05:50:53.000Z" itemprop="datePublished"> 发表于 2015-03-30</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Put-PowerDNS-to-Practice"><span class="toc-number">1.</span> <span class="toc-text">Put PowerDNS to Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Authoritative-Server"><span class="toc-number">1.1.</span> <span class="toc-text">The Authoritative Server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Primary-server"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. Primary server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-The-secondary-name-server"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. The secondary name server</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-PowerDNS-recursor"><span class="toc-number">1.2.</span> <span class="toc-text">The PowerDNS recursor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#The-PowerDNS-recursor-supports"><span class="toc-number">1.2.1.</span> <span class="toc-text">The PowerDNS recursor supports:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#install"><span class="toc-number">1.3.</span> <span class="toc-text">install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure"><span class="toc-number">1.4.</span> <span class="toc-text">configure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CentOS-%E5%AE%89%E8%A3%85-recursor"><span class="toc-number">1.5.</span> <span class="toc-text">CentOS 安装 recursor :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure-1"><span class="toc-number">1.6.</span> <span class="toc-text">configure :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#manage-recursor-service-%EF%BC%9A"><span class="toc-number">1.7.</span> <span class="toc-text">manage recursor service ：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-and-Tuning"><span class="toc-number">2.</span> <span class="toc-text">Performance and Tuning</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">3.</span> <span class="toc-text">Summary</span></a></li></ol>
		
		</div>
		
		<h2 id="Put-PowerDNS-to-Practice"><a href="#Put-PowerDNS-to-Practice" class="headerlink" title="Put PowerDNS to Practice"></a>Put PowerDNS to Practice</h2><blockquote>
<p>PowerDNS is proud to be an open source product for DNS parsing . It is one such marvelous open alternative domain name system (DNS). PowerDNS is notably in use at some of the largest ISPs and websites in the world, such as AOL, Shaw Cable, and even Wikipedia. Its compact codebase and focus on security, scalability, and reliability make it a great name server choice. PowerDNS is jam packed with features that would impress any network or system admin. </p>
</blockquote>
<p>###Good things : </p>
<pre><code>    Authoritative DNS server (hosting)
    Resolving DNS server (caching)
    API to provision zones and records
    DNSSEC support (as of 3.x)
    Web-based management options
    DNS data stored in plaintext (BIND compatible)
    IPv4 and IPv6, UDP/TCP, 100% compliant
    MySQL, PostgreSQL, Microsoft SQL Server, Oracle, Sybase database back ends
    Load balancing/failover algorithms
    SNMP support
    Remotely pollable statistics for real-time graphing
    Optional built-in web server
    Debugging tools
    Support for Linux, BSD, Unix
</code></pre>
<p>##Key components of PowerDNS </p>
<h3 id="The-Authoritative-Server"><a href="#The-Authoritative-Server" class="headerlink" title="The Authoritative Server"></a>The Authoritative Server</h3><p>角色 : </p>
<h4 id="1-Primary-server"><a href="#1-Primary-server" class="headerlink" title="1. Primary server"></a>1. Primary server</h4><pre><code>Sometimes called a master server, which is the original and definitive 
source for all zone records for a domain.
</code></pre>
<h4 id="2-The-secondary-name-server"><a href="#2-The-secondary-name-server" class="headerlink" title="2. The secondary name server"></a>2. The secondary name server</h4><pre><code>Often called a slave server, is an identical replica used to provide redundancy and high availability.
Like any service as vital as DNS, you should build redundancy into your infrastructure. That means at 
least two or more of everything, or you will need much more than two aspirins to deal with the 
headaches caused by downtime.
</code></pre>
<h3 id="The-PowerDNS-recursor"><a href="#The-PowerDNS-recursor" class="headerlink" title="The PowerDNS recursor"></a>The PowerDNS recursor</h3><pre><code>Simply provides caching or a standalone recursive resolver for clients accessing your network or the 
greater Internet (i.e., it is your first line of DNS for client machines). Recall that it isn’t 
authoritative but simply provides query resolution to the network client resolver (the client-side
portion used to perform DNS queries) on your local machine.
</code></pre>
<h4 id="The-PowerDNS-recursor-supports"><a href="#The-PowerDNS-recursor-supports" class="headerlink" title="The PowerDNS recursor supports:"></a>The PowerDNS recursor supports:</h4><pre><code>All relevant standards
Advanced anti-spoofing measures
Reconfiguration without downtime
Plain BIND zone files for “resolved hosting”
Question interception, answer reconditioning, NXDOMAIN redirection
-(including “block lists” and security measures)
The rec_control utility, an API for direct control of the PowerDNS recursor and to output data 
-to MRTG and RDD for pretty network graphs
Local and remote access
DNS64
</code></pre>
<p>##Installing the PowerDNS </p>
<h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><pre><code>yum install wget
wget http://soft.laozuo.org/powerdns/epel-release-6-8.noarch.rpm
rpm -Uvh ./epel-release-6-8.noarch.rpm
yum install pdns pdns-backend-mysql
</code></pre>
<h3 id="configure"><a href="#configure" class="headerlink" title="configure"></a>configure</h3><p>BackEnd: MySQL </p>
<pre><code>create database powerdnsdb; 
GRANT ALL ON powerdns.* TO &#39;pownerdns&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;pownerdns&#39;;
FLUSH PRIVILEGES;
</code></pre>
<p>SQL : </p>
<pre><code>CREATE TABLE domains (
  id                    INT AUTO_INCREMENT,
  name                  VARCHAR(255) NOT NULL,
  master                VARCHAR(128) DEFAULT NULL,
  last_check            INT DEFAULT NULL,
  type                  VARCHAR(6) NOT NULL,
  notified_serial       INT DEFAULT NULL,
  account               VARCHAR(40) DEFAULT NULL,
  PRIMARY KEY (id)
) Engine=InnoDB;    
CREATE UNIQUE INDEX name_index ON domains(name);    

CREATE TABLE records (
  id                    INT AUTO_INCREMENT,
  domain_id             INT DEFAULT NULL,
  name                  VARCHAR(255) DEFAULT NULL,
  type                  VARCHAR(10) DEFAULT NULL,
  content               VARCHAR(64000) DEFAULT NULL,
  ttl                   INT DEFAULT NULL,
  prio                  INT DEFAULT NULL,
  change_date           INT DEFAULT NULL,
  disabled              TINYINT(1) DEFAULT 0,
  ordername             VARCHAR(255) BINARY DEFAULT NULL,
  auth                  TINYINT(1) DEFAULT 1,
  PRIMARY KEY (id)
) Engine=InnoDB;    
CREATE INDEX nametype_index ON records(name,type);
CREATE INDEX domain_id ON records(domain_id);
CREATE INDEX recordorder ON records (domain_id, ordername); 

CREATE TABLE supermasters (
  ip                    VARCHAR(64) NOT NULL,
  nameserver            VARCHAR(255) NOT NULL,
  account               VARCHAR(40) NOT NULL,
  PRIMARY KEY (ip, nameserver)
) Engine=InnoDB;    

CREATE TABLE comments (
  id                    INT AUTO_INCREMENT,
  domain_id             INT NOT NULL,
  name                  VARCHAR(255) NOT NULL,
  type                  VARCHAR(10) NOT NULL,
  modified_at           INT NOT NULL,
  account               VARCHAR(40) NOT NULL,
  comment               VARCHAR(64000) NOT NULL,
  PRIMARY KEY (id)
) Engine=InnoDB;    
CREATE INDEX comments_domain_id_idx ON comments (domain_id);
CREATE INDEX comments_name_type_idx ON comments (name, type);
CREATE INDEX comments_order_idx ON comments (domain_id, modified_at);   

CREATE TABLE domainmetadata (
  id                    INT AUTO_INCREMENT,
  domain_id             INT NOT NULL,
  kind                  VARCHAR(32),
  content               TEXT,
  PRIMARY KEY (id)
) Engine=InnoDB;    
CREATE INDEX domainmetadata_idx ON domainmetadata (domain_id, kind);    

CREATE TABLE cryptokeys (
  id                    INT AUTO_INCREMENT,
  domain_id             INT NOT NULL,
  flags                 INT NOT NULL,
  active                BOOL,
  content               TEXT,
  PRIMARY KEY(id)
) Engine=InnoDB;    
CREATE INDEX domainidindex ON cryptokeys(domain_id);    

CREATE TABLE tsigkeys (
  id                    INT AUTO_INCREMENT,
  name                  VARCHAR(255),
  algorithm             VARCHAR(50),
  secret                VARCHAR(255),
  PRIMARY KEY (id)
) Engine=InnoDB;    
CREATE UNIQUE INDEX namealgoindex ON tsigkeys(name, algorithm);
</code></pre>
<p>RECORD :  </p>
<pre><code>*************************** 258. row ***************************
       id: 649
domain_id: 1
     name: ruiaylin2.sjz.autohome.com.cn
     type: A
  content: 192.168.xx.xxx
      ttl: 86400
     prio: 0
change_date: 1425371097
 disabled: 0
ordername: NULL
     auth: 1 
</code></pre>
<p>ADD DNS :</p>
<pre><code>insert into records(
domain_id, name, type, content, ttl, prio,change_date, disabled,  ordername, auth
) values (
1, &#39;ruiaylin3.sjz.autohome.com.cn&#39; , &#39;A&#39; , &#39;192.168.xx.xx&#39; , 86400, 0 , 1425371097 ,0,&#39;&#39;,1
) ;
</code></pre>
<p>core variables : </p>
<pre><code>forward-zones=autohome.com.cn=192.168.xxx.xxxx;192.168.xxx.xxx
local-address=0.0.0.0
max-cache-ttl=120  // dns cache invalid time 
// other variables use the default value 
</code></pre>
<p>##Installing the PowerDNS Recursor </p>
<h3 id="CentOS-安装-recursor"><a href="#CentOS-安装-recursor" class="headerlink" title="CentOS 安装 recursor :"></a>CentOS 安装 recursor :</h3><pre><code>yum -y install pdns pdns-backend-mysql pdns-recursor
</code></pre>
<h3 id="configure-1"><a href="#configure-1" class="headerlink" title="configure :"></a>configure :</h3><pre><code>launch=gmysql
gmysql-host=192.168.xxx.xxx
gmysql-user=xxx
gmysql-password=xxx
gmysql-dbname=powerdnsdb 
max-cache-ttl=120  // dns cache invalid time 
// other variables use the default value 
</code></pre>
<h3 id="manage-recursor-service-："><a href="#manage-recursor-service-：" class="headerlink" title="manage recursor service ："></a>manage recursor service ：</h3><pre><code> service pdns-recursor start / stop 
</code></pre>
<h2 id="Performance-and-Tuning"><a href="#Performance-and-Tuning" class="headerlink" title="Performance and Tuning"></a>Performance and Tuning</h2><p>We can reference the docs : <a target="_blank" rel="noopener" href="https://doc.powerdns.com/md/authoritative/performance/#performance-and-tuning">https://doc.powerdns.com/md/authoritative/performance/#performance-and-tuning</a></p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><pre><code>powerDNS is a alternative DNS for OPS basic service . Happy to use it ! 
</code></pre>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PowerDNS/">PowerDNS</a><a href="/tags/DNS/">DNS</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://ruiaylin.github.io/2015/03/30/Put-PowerDNS-to-use/" data-title="Put PowerDNS to Practice | ruiayLin&#39;s Blog" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/05/04/install-docker-on-centos-6x/" title="Install docker on CentOs">
  <strong>上一篇：</strong><br/>
  <span>
  Install docker on CentOs</span>
</a>
</div>


<div class="next">
<a href="/2015/03/27/CentOS-7-update-kernel/"  title="CentOS 7 update kernel in simple way">
 <strong>下一篇：</strong><br/> 
 <span>CentOS 7 update kernel in simple way
</span>
</a>
</div>

</nav>

	



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Put-PowerDNS-to-Practice"><span class="toc-number">1.</span> <span class="toc-text">Put PowerDNS to Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Authoritative-Server"><span class="toc-number">1.1.</span> <span class="toc-text">The Authoritative Server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Primary-server"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. Primary server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-The-secondary-name-server"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. The secondary name server</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-PowerDNS-recursor"><span class="toc-number">1.2.</span> <span class="toc-text">The PowerDNS recursor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#The-PowerDNS-recursor-supports"><span class="toc-number">1.2.1.</span> <span class="toc-text">The PowerDNS recursor supports:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#install"><span class="toc-number">1.3.</span> <span class="toc-text">install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure"><span class="toc-number">1.4.</span> <span class="toc-text">configure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CentOS-%E5%AE%89%E8%A3%85-recursor"><span class="toc-number">1.5.</span> <span class="toc-text">CentOS 安装 recursor :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configure-1"><span class="toc-number">1.6.</span> <span class="toc-text">configure :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#manage-recursor-service-%EF%BC%9A"><span class="toc-number">1.7.</span> <span class="toc-text">manage recursor service ：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-and-Tuning"><span class="toc-number">2.</span> <span class="toc-text">Performance and Tuning</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">3.</span> <span class="toc-text">Summary</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="ruiaylin" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Docker/" title="Docker">Docker<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Go/" title="Go">Go<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/MySQL/" title="MySQL">MySQL<sup>18</sup></a></li>
		  
		
		  
			<li><a href="/categories/NewSQL/" title="NewSQL">NewSQL<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Oracle/" title="Oracle">Oracle<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Python/" title="Python">Python<sup>7</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/MySQL/" title="MySQL">MySQL<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/OPS/" title="OPS">OPS<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Docker/" title="Docker">Docker<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Fabric/" title="Fabric">Fabric<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Go/" title="Go">Go<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Group-Replicaiton/" title="Group Replicaiton">Group Replicaiton<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/MGR/" title="MGR">MGR<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Replicaiton/" title="Replicaiton">Replicaiton<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/MHA/" title="MHA">MHA<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Python/" title="Python">Python<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Xtrabackup/" title="Xtrabackup">Xtrabackup<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/DNS/" title="DNS">DNS<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Sharding/" title="Sharding">Sharding<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/PowerDNS/" title="PowerDNS">PowerDNS<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Kernel/" title="Kernel">Kernel<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Discourse/" title="Discourse">Discourse<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Forum/" title="Forum">Forum<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/gh-ost/" title="gh-ost">gh-ost<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/DDL/" title="DDL">DDL<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/转载/" title="转载">转载<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">知识链接</p>
    <ul>
        
          <li>
            
            	<a href="http://mysql.taobao.org/monthly/" target="_blank" title="阿里内核月报">阿里内核月报</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.zhihu.com/org/polardb-x" target="_blank" title="PloarDB-X专栏">PloarDB-X专栏</a>
            
          </li>
        
          <li>
            
            	<a href="https://cn.pingcap.com/blog/" target="_blank" title="TiDB 博客">TiDB 博客</a>
            
          </li>
        
          <li>
            
            	<a href="https://dev.mysql.com/doc/refman/8.0/en/" target="_blank" title="MySQL 8.0 Docs">MySQL 8.0 Docs</a>
            
          </li>
        
          <li>
            
            	<a href="https://dev.mysql.com/blog-archive/" target="_blank" title="MySQL Server Blog">MySQL Server Blog</a>
            
          </li>
        
          <li>
            
            	<a href="https://lefred.be/" target="_blank" title="Lefred&#39;s blog">Lefred&#39;s blog</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.zhihu.com/people/wen-zheng-hu" target="_blank" title="温正湖专栏">温正湖专栏</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.percona.com/blog/" target="_blank" title="Percona Blog">Percona Blog</a>
            
          </li>
        
          <li>
            
            	<a href="https://engineering.fb.com/" target="_blank" title="Meta Engineering">Meta Engineering</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.uber.com/en-US/blog/engineering/" target="_blank" title="Uber Engineering">Uber Engineering</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.blog/category/engineering/" target="_blank" title="Github Engineering">Github Engineering</a>
            
          </li>
        
          <li>
            
            	<a href="https://medium.com/pinterest-engineering" target="_blank" title="Pinterest Engineering">Pinterest Engineering</a>
            
          </li>
        
          <li>
            
            	<a href="https://flask.palletsprojects.com/" target="_blank" title="Flask Docs">Flask Docs</a>
            
          </li>
        
          <li>
            
            	<a href="https://tympanus.net/codrops/" target="_blank" title="Codrops front">Codrops front</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 我是瑞超，美团到店DBA负责人、数据库架构师。曾在支付宝、汽车之家、百度就职， <br/>
			有十多年运维、平台开发、架构设计经验，对分布式技术、内核源码、可观测技术应用感兴趣，欢迎交流。</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/ruiaylin" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2024 
		
		<a href="/about" target="_blank" title="ruichao.lin">ruichao.lin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>











<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
